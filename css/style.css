:root{
    --bg:#0b0d11;
    --panel:#0f131a;
    --accent:#4dd0e1;
    --text:#e6eef6;
    --muted:#9fb1c1;
    --border:#1b2330;
    --good:#86efac;
    --warn:#facc15;
    --bad:#f87171;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;background:var(--bg);color:var(--text);font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace}
  #app{display:flex;flex-direction:column;height:100%}
  #topbar{
    display:flex;align-items:center;gap:.75rem;padding:.5rem .75rem;border-bottom:1px solid var(--border);
    background:linear-gradient(180deg,#0f131a, #0c1117);position:sticky;top:0;z-index:4
  }
  #title{font-weight:700;letter-spacing:.5px}
  #topbar .spacer{flex:1}
  #fps{font-variant-numeric:tabular-nums;color:var(--muted)}
  /* Responsive main layout: panel slides in/out, viewer expands */
  /* Responsive main layout: panel slides in/out, viewer expands */
  /* Use flexbox for main layout to allow viewer to fully expand */
  #main {
    display: flex;
    flex-direction: row;
    height: calc(100% - 48px);
    min-height: 0;
    transition: all .25s cubic-bezier(.4,1.2,.4,1);
  }
  #main.panel-hidden #panel {
    display: none !important;
  }
  #viewer {
    flex: 1 1 0%;
    min-width: 0;
    min-height: 0;
    height: 100%;
    width: 100%;
    position: relative;
    transition: width .25s cubic-bezier(.4,1.2,.4,1);
    display: flex;
    flex-direction: column;
  }
  canvas {
    flex: 1 1 0%;
    width: 100% !important;
    height: 100% !important;
    background: #06080c;
    object-fit: contain;
  }
  #panel {
    width: 332px;
    height: 100%;
    overflow: auto;
    background: var(--panel);
    border-left: 1px solid var(--border);
    padding: .75rem;
    line-height: 1.25;
    min-width: 0;
    transition: width .25s cubic-bezier(.4,1.2,.4,1),transform .25s cubic-bezier(.4,1.2,.4,1);
  }
  details{border:1px solid var(--border);border-radius:8px;margin-bottom:.5rem;background:#0d1117}
  details[open]{background:#0e141b}
  summary{cursor:pointer;padding:.6rem .75rem;font-weight:600;color:#cfe4f7;display:flex;align-items:center;gap:.5rem}
  .group{padding:.5rem .75rem .75rem .75rem;display:grid;gap:.5rem}
  label{display:grid;grid-template-columns: 1fr 88px;align-items:center;gap:.5rem}
  label.inline{grid-template-columns:auto 1fr}
  input[type="range"]{width:100%}
  input[type="text"], select, button, input[type="number"]{
    background:#0b0f15;color:var(--text);border:1px solid var(--border);border-radius:6px;padding:.35rem .5rem;outline:none
  }
  input[type="text"]:focus, select:focus, button:focus, input[type="number"]:focus{border-color:#214b63;box-shadow:0 0 0 2px #214b6333}
  button{cursor:pointer}
  .row{display:flex;gap:.5rem;align-items:center}
  .hint{font-size:.85rem;color:var(--muted)}
  #hud{position:absolute;left:.5rem;bottom:.5rem;color:#c9d7e1;background:#00000066;padding:.35rem .5rem;border-radius:6px;backdrop-filter: blur(3px);font-size:.9rem;pointer-events:none}
  .pill{display:inline-block;background:#0b1220;border:1px solid var(--border);border-radius:999px;padding:.15rem .5rem;color:#bcd}
  #mobileTip{display:none}
  @media (max-width: 900px){
    #main {
      flex-direction: column;
      height: auto;
    }
    #viewer {
      height: 100vh;
      min-height: 0;
      min-width: 0;
    }
    #panel {
      position: fixed;
      right: 0;
      top: 48px;
      bottom: 0;
      width: min(92vw,380px);
      max-width: 100vw;
      transform: translateX(100%);
      transition: transform .25s cubic-bezier(.4,1.2,.4,1);
      z-index: 5;
      box-shadow: -2px 0 16px #0008;
      display: block;
    }
    #panel.open {
      transform: translateX(0);
      opacity: 1;
      pointer-events: auto;
    }
    #panel:not(.open) {
      transform: translateX(100%);
      opacity: 0;
      pointer-events: none;
    }
    #main.panel-hidden #panel {
      display: none !important;
    }
    #mobileTip{display:inline-block}
  }
  .tiny{opacity:.85;font-size:.85em}
  .flex{display:flex;gap:.5rem;align-items:center}
  .grow{flex:1}